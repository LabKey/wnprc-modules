apply plugin: 'idea'

idea.module {
    excludeDirs += file("data")
}

task("build", group: "Docker", type: Exec, description: "Generates the LabKey docker image using the Dockerfile in this folder") {
    workingDir "${project.rootDir}/docker"
    executable "docker"
    args "build", ".", "-t", "labkey:15.2"
}

task("up", group: "Docker", type: Exec, description: "Starts the docker-compose environment (labkey + postgres)") {
    workingDir "${project.rootDir}/docker"
    executable "docker-compose"
    args "up", "-d"
    environment CATALINA_OPTS: "-ea -Ddevmode=true"
}

task("down", group: "Docker", type: Exec, description: "Shuts down the docker-compose environment (labkey + postgres)") {
    workingDir "${project.rootDir}/docker"
    executable "docker-compose"
    args "down"
}